<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:jove="http://java.sun.com/jsf/composite/componentes">
	
	<p:dialog id="modal-atividadeTarefa" header="Relacionamento Atividade Tarefa" widgetVar="atividadeTarefa" modal="true" resizable="false" 
		width="800px">
		<div style="width: 790px; margin-left:-10px;">
			<p:panel id="panel-atividade-tarefa" style="width: 750px; margin: 0 auto;">
				<h:panelGroup id="cadastroAtividade" styleClass="formulario-atividade-tarefa" >
					<p:outputLabel value="Atividade selecionada: #{atividadeTarefaBean.atividadeSelecionada.nome}" style="margin:10px 0 !important;" />
	
				<h:panelGrid columns="2" rowClasses="coluna-30, coluna-70" width="100%">
						<p:outputLabel value="Escolha uma tarefa" />
						
						<p:selectOneMenu id="cbx-atividadeTarefa" value="#{atividadeTarefaBean.tarefaSelecionada}"
							style="width: 340px;" converter="genericConverter" >
							<f:selectItem itemLabel="Selecione" itemValue=""  />
							<f:selectItems value="" var="atarefa" itemLabel="#{atarefa.nome}" 
								itemValue="#{empresa}"/>
						</p:selectOneMenu>
					</h:panelGrid>
				</h:panelGroup>
			</p:panel>
			
			<div id="botoes-atividade-tarefa" style="width: 750px; margin: 13px !important;">
				<h:panelGroup id="botoesAtividadeTarefa">
					<p:commandButton value="Inserir" styleClass="btn-padrao"/>
					<p:commandButton value="Cancelar" styleClass="btn-padrao" />
				</h:panelGroup>
			</div>
			
			<!-- Tabela que lista as atividades/Tarefa cadastradas -->
			<div style="width: 750px; margin: 5px 20px !important;" >
				<p:dataTable id="table-atividadeTarefa" value="#{atividadeTarefaBean.listaAtividadeTarefa}" var="ativdadeTarefa" rowKey="#{ativdadeTarefa.idAtividadeTarefa}"  widgetVar="tabelaAtividadeTarefa"
					selection="#{atividadeTarefaBean.atividadeTarefa}" selectionMode="single" paginator="true" rows="5" filteredValue="#{atividadeTarefaBean.listaAtividadeTarefaFiltrada}"
					paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" 
					paginatorPosition="bottom" resizableColumns="flase"
					emptyMessage="Nenhum registro foi encontrado" >
					
					<p:ajax event="rowSelect" update=":form-pagina-cadastro:tabview-cadastro:formulario-atividade"/>
					
					<f:facet name="header">
						Tabela de relacionamento Atividade Tarefa
					</f:facet>
					
					<p:column headerText="Atividade" styleClass="coluna-30" filterBy="atividade.nome"
						filterStyle="width:80%;" style="text-align: center;" >
						<h:outputText value="#{ativdadeTarefa.atividade.nome}" />
					</p:column>
					
					<p:column headerText="Descrição" styleClass="coluna-50" filterBy="tarefa.nome"
						filterStyle="width:80%;" style="text-align: center;" >
						<h:outputText value="#{ativdadeTarefa.tarefa.nome}" />
					</p:column>
					
					<p:column headerText="Status" styleClass="coluna-15" >
						<h:panelGroup>
							<p:commandButton value="Ativo" />
							<p:commandButton value="Inativo" />
						</h:panelGroup>
					</p:column>
				
				</p:dataTable>	
			</div>
		</div>
	</p:dialog>
</ui:composition>