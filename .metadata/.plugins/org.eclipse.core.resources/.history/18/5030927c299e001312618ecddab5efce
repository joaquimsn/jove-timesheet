package br.com.jovetecnologia.infrastructure.dao;


import org.hibernate.HibernateException;
import org.hibernate.Query;
import org.hibernate.Session;
import org.hibernate.Transaction;

import br.com.jovetecnologia.domain.model.Usuario;
import br.com.jovetecnologia.infrastructure.connection.ConexaoHibernate;

public class UsuarioDAO {
	
	private Usuario usuario;
	Session session;
	
	/**
	 * Retorna um objeto usuario se as credenciais passadas estiverem na DB, se n√£o retorna null
	 * @param nome String com a usuario
	 * @param senha String com a senha
	 * @return Um objeto usuario se o usuario e senha existir.
	 */
	public Usuario validarUsuario(String nome, String senha){
		
		try {
			session = ConexaoHibernate.getSessionFactory().openSession();
			String hql = "SELECT u FROM Usuario u where u.nome = '" + nome + "' AND u.senha = '" + senha + "'";
			
			Query query = session.createQuery(hql);
			
			usuario = (Usuario) query.uniqueResult();
			
			return usuario;
			
		} catch (HibernateException e) {
			ConexaoHibernate.fecharConexao(session);
			e.printStackTrace();
		}
		
		return null;
	}
}
